window.yii=function(t){var e={reloadableScripts:[],clickableSelector:'a, button, input[type="submit"], input[type="button"], input[type="reset"], input[type="image"]',changeableSelector:"select, input, textarea",getCsrfParam:function(){return t("meta[name=csrf-param]").attr("content")},getCsrfToken:function(){return t("meta[name=csrf-token]").attr("content")},setCsrfToken:function(e,i){t("meta[name=csrf-param]").attr("content",e),t("meta[name=csrf-token]").attr("content",i)},refreshCsrfToken:function(){var i=e.getCsrfToken();i&&t('form input[name="'+e.getCsrfParam()+'"]').val(i)},confirm:function(t,e,i){window.confirm(t)?!e||e():!i||i()},handleAction:function(i,a){var n,r=i.attr("data-form")?t("#"+i.attr("data-form")):i.closest("form"),s=!i.data("method")&&r?r.attr("method"):i.data("method"),o=i.attr("href"),l=o&&"#"!==o,u=i.data("params"),c=u&&t.isPlainObject(u),d=i.data("pjax"),f=void 0!==d&&0!==d&&t.support.pjax,h={};if(t.each(["submit","reset","elements","length","name","acceptCharset","action","enctype","method","target"],function(t,e){c&&u.hasOwnProperty(e)&&console.error("Parameter name '"+e+"' conflicts with a same named form property. Please use another name.")}),f&&(void 0!==(n=i.data("pjax-container"))&&n.length||(n=i.closest("[data-pjax-container]").attr("id")?"#"+i.closest("[data-pjax-container]").attr("id"):""),n.length||(n="body"),h={container:n,push:!!i.data("pjax-push-state"),replace:!!i.data("pjax-replace-state"),scrollTo:i.data("pjax-scrollto"),pushRedirect:i.data("pjax-push-redirect"),replaceRedirect:i.data("pjax-replace-redirect"),skipOuterContainers:i.data("pjax-skip-outer-containers"),timeout:i.data("pjax-timeout"),originalEvent:a,originalTarget:i}),void 0!==s){var m,p,v=!r.length;if(v){l||(o=e.getCurrentUrl()),r=t("<form/>",{method:s,action:o});var g=i.attr("target");if(g&&r.attr("target",g),/(get|post)/i.test(s)||(r.append(t("<input/>",{name:"_method",value:s,type:"hidden"})),s="post",r.attr("method",s)),/post/i.test(s)){var y=e.getCsrfParam();y&&r.append(t("<input/>",{name:y,value:e.getCsrfToken(),type:"hidden"}))}r.hide().appendTo("body")}else m=r.attr("method"),r.attr("method",s),l&&(p=r.attr("action"),r.attr("action",o));var b=r.data("yiiActiveForm");b&&(b.submitObject=i),c&&t.each(u,function(e,i){r.append(t("<input/>").attr({name:e,value:i,type:"hidden"}))}),f&&r.on("submit",function(e){t.pjax.submit(e,h)}),r.trigger("submit"),t.when(r.data("yiiSubmitFinalizePromise")).done(function(){v?r.remove():(void 0!==p&&r.attr("action",p),r.attr("method",m),c&&t.each(u,function(e){t('input[name="'+e+'"]',r).remove()}))})}else l?f?t.pjax.click(a,h):window.location.assign(o):i.is(":submit")&&r.length&&(f&&r.on("submit",function(e){t.pjax.submit(e,h)}),r.trigger("submit"))},getQueryParams:function(e){var i=e.indexOf("?");if(i<0)return{};for(var a=t.grep(e.substring(i+1).split("#")[0].split("&"),function(t){return""!==t}),n={},r=0,s=a.length;r<s;r++){var o=a[r].split("="),l=decodeURIComponent(o[0].replace(/\+/g,"%20")),u=o.length>1?decodeURIComponent(o[1].replace(/\+/g,"%20")):"";l.length&&(void 0===n[l]?n[l]=u||"":(t.isArray(n[l])||(n[l]=[n[l]]),n[l].push(u||"")))}return n},initModule:function(i){(void 0===i.isActive||i.isActive)&&(t.isFunction(i.init)&&i.init(),t.each(i,function(){t.isPlainObject(this)&&e.initModule(this)}))},init:function(){var n,r;t.ajaxPrefilter(function(t,i,a){!t.crossDomain&&e.getCsrfParam()&&a.setRequestHeader("X-CSRF-Token",e.getCsrfToken())}),e.refreshCsrfToken(),t(document).ajaxComplete(function(t,e){var i=e&&e.getResponseHeader("X-Redirect");i&&window.location.assign(i)}),n={},t("script[src]").each(function(){var t=a(this.src);n[t]=!0}),t.ajaxPrefilter("script",function(t,e,r){if("jsonp"!=t.dataType){var s=a(t.url),o=!0===n[s]&&!i(s),l=void 0!==n[s]&&!0===n[s].xhrDone;o||l?r.abort():(void 0!==n[s]&&!0!==n[s]||(n[s]={xhrList:[],xhrDone:!1}),r.done(function(t,e,i){if(!0!==n[i.yiiUrl].xhrDone){n[i.yiiUrl].xhrDone=!0;for(var a=0,r=n[i.yiiUrl].xhrList.length;a<r;a++){var s=n[i.yiiUrl].xhrList[a];s&&s.readyState!==XMLHttpRequest.DONE&&s.abort()}n[i.yiiUrl]=!0}}).fail(function(t,e){if("abort"!==e){delete n[t.yiiUrl].xhrList[t.yiiIndex];for(var i=!0,a=0,r=n[t.yiiUrl].xhrList.length;a<r;a++)n[t.yiiUrl].xhrList[a]&&(i=!1);i&&delete n[t.yiiUrl]}}),r.yiiIndex=n[s].xhrList.length,r.yiiUrl=s,n[s].xhrList[r.yiiIndex]=r)}}),t(document).ajaxComplete(function(){var e=[];t("link[rel=stylesheet]").each(function(){var n=a(this.href);i(n)||(-1===t.inArray(n,e)?e.push(n):t(this).remove())})}),r=function(i){var a=t(this),n=a.data("method"),r=a.data("confirm"),s=a.data("form");return void 0===n&&void 0===r&&void 0===s||(void 0!==r&&!1!==r&&""!==r?t.proxy(e.confirm,this)(r,function(){e.handleAction(a,i)}):e.handleAction(a,i),i.stopImmediatePropagation(),!1)},t(document).on("click.yii",e.clickableSelector,r).on("change.yii",e.changeableSelector,r)},getBaseCurrentUrl:function(){return window.location.protocol+"//"+window.location.host},getCurrentUrl:function(){return window.location.href}};function i(t){for(var i=0;i<e.reloadableScripts.length;i++){var n=a(e.reloadableScripts[i]);if(!0===new RegExp("^"+(r=n,r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")).split("\\*").join(".+")+"$").test(t))return!0}var r;return!1}function a(t){return"/"===t.charAt(0)?e.getBaseCurrentUrl()+t:t}return e}(window.jQuery),window.jQuery(function(){window.yii.initModule(window.yii)}),yii.validation=function(t){var e={isEmpty:function(e){return null==e||t.isArray(e)&&0===e.length||""===e},addMessage:function(t,e,i){t.push(e.replace(/\{value\}/g,i))},required:function(i,a,n){var r=!1;if(void 0===n.requiredValue){var s="string"==typeof i||i instanceof String;(n.strict&&void 0!==i||!n.strict&&!e.isEmpty(s?t.trim(i):i))&&(r=!0)}else(!n.strict&&i==n.requiredValue||n.strict&&i===n.requiredValue)&&(r=!0);r||e.addMessage(a,n.message,i)},boolean:function(t,i,a){a.skipOnEmpty&&e.isEmpty(t)||(!a.strict&&(t==a.trueValue||t==a.falseValue)||a.strict&&(t===a.trueValue||t===a.falseValue)||e.addMessage(i,a.message,t))},string:function(t,i,a){a.skipOnEmpty&&e.isEmpty(t)||("string"==typeof t?void 0===a.is||t.length==a.is?(void 0!==a.min&&t.length<a.min&&e.addMessage(i,a.tooShort,t),void 0!==a.max&&t.length>a.max&&e.addMessage(i,a.tooLong,t)):e.addMessage(i,a.notEqual,t):e.addMessage(i,a.message,t))},file:function(e,n,r){var s=i(e,n,r);t.each(s,function(t,e){a(e,n,r)})},image:function(n,r,s,o){var l=i(n,r,s);t.each(l,function(i,n){if(a(n,r,s),"undefined"!=typeof FileReader){var l=t.Deferred();e.validateImage(n,r,s,l,new FileReader,new Image),o.push(l)}})},validateImage:function(t,e,i,a,n,r){r.onload=function(){!function(t,e,i,a){a.minWidth&&e.width<a.minWidth&&i.push(a.underWidth.replace(/\{file\}/g,t.name));a.maxWidth&&e.width>a.maxWidth&&i.push(a.overWidth.replace(/\{file\}/g,t.name));a.minHeight&&e.height<a.minHeight&&i.push(a.underHeight.replace(/\{file\}/g,t.name));a.maxHeight&&e.height>a.maxHeight&&i.push(a.overHeight.replace(/\{file\}/g,t.name))}(t,r,e,i),a.resolve()},r.onerror=function(){e.push(i.notImage.replace(/\{file\}/g,t.name)),a.resolve()},n.onload=function(){r.src=this.result},n.onerror=function(){a.resolve()},n.readAsDataURL(t)},number:function(t,i,a){a.skipOnEmpty&&e.isEmpty(t)||("string"!=typeof t||a.pattern.test(t)?(void 0!==a.min&&t<a.min&&e.addMessage(i,a.tooSmall,t),void 0!==a.max&&t>a.max&&e.addMessage(i,a.tooBig,t)):e.addMessage(i,a.message,t))},range:function(i,a,n){if(!n.skipOnEmpty||!e.isEmpty(i))if(n.allowArray||!t.isArray(i)){var r=!0;t.each(t.isArray(i)?i:[i],function(e,i){return-1!=t.inArray(i,n.range)||(r=!1,!1)}),void 0===n.not&&(n.not=!1),n.not===r&&e.addMessage(a,n.message,i)}else e.addMessage(a,n.message,i)},regularExpression:function(t,i,a){a.skipOnEmpty&&e.isEmpty(t)||(!a.not&&!a.pattern.test(t)||a.not&&a.pattern.test(t))&&e.addMessage(i,a.message,t)},email:function(t,i,a){if(!a.skipOnEmpty||!e.isEmpty(t)){var n=!0,r=/^((?:"?([^"]*)"?\s)?)(?:\s+)?(?:(<?)((.+)@([^>]+))(>?))$/.exec(t);if(null===r)n=!1;else{var s=r[5],o=r[6];a.enableIDN&&(s=punycode.toASCII(s),o=punycode.toASCII(o),t=r[1]+r[3]+s+"@"+o+r[7]),n=!(s.length>64)&&(!((s+"@"+o).length>254)&&(a.pattern.test(t)||a.allowName&&a.fullPattern.test(t)))}n||e.addMessage(i,a.message,t)}},url:function(t,i,a){if(!a.skipOnEmpty||!e.isEmpty(t)){a.defaultScheme&&!/:\/\//.test(t)&&(t=a.defaultScheme+"://"+t);var n=!0;if(a.enableIDN){var r=/^([^:]+):\/\/([^\/]+)(.*)$/.exec(t);null===r?n=!1:t=r[1]+"://"+punycode.toASCII(r[2])+r[3]}n&&a.pattern.test(t)||e.addMessage(i,a.message,t)}},trim:function(i,a,n,r){var s=i.find(a.input);return s.is(":checkbox, :radio")?r:(r=s.val(),n.skipOnEmpty&&e.isEmpty(r)||(r=t.trim(r),s.val(r)),r)},captcha:function(i,a,n){if(!n.skipOnEmpty||!e.isEmpty(i)){var r=t("body").data(n.hashKey);r=null==r?n.hash:r[n.caseSensitive?0:1];for(var s=n.caseSensitive?i:i.toLowerCase(),o=s.length-1,l=0;o>=0;--o)l+=s.charCodeAt(o);l!=r&&e.addMessage(a,n.message,i)}},compare:function(i,a,n,r){if(!n.skipOnEmpty||!e.isEmpty(i)){var s,o=!0;if(void 0===n.compareAttribute)s=n.compareValue;else{var l=t("#"+n.compareAttribute);l.length||(l=r.find('[name="'+n.compareAttributeName+'"]')),s=l.val()}switch("number"===n.type&&(i=i?parseFloat(i):0,s=s?parseFloat(s):0),n.operator){case"==":o=i==s;break;case"===":o=i===s;break;case"!=":o=i!=s;break;case"!==":o=i!==s;break;case">":o=i>s;break;case">=":o=i>=s;break;case"<":o=i<s;break;case"<=":o=i<=s;break;default:o=!1}o||e.addMessage(a,n.message,i)}},ip:function(t,i,a){if(!a.skipOnEmpty||!e.isEmpty(t)){var n=null,r=null,s=new RegExp(a.ipParsePattern).exec(t);if(s&&(n=s[1]||null,t=s[2],r=s[4]||null),!0!==a.subnet||null!==r)if(!1!==a.subnet||null===r)if(!1!==a.negation||null===n)6==(-1===t.indexOf(":")?4:6)?(new RegExp(a.ipv6Pattern).test(t)||e.addMessage(i,a.messages.message,t),a.ipv6||e.addMessage(i,a.messages.ipv6NotAllowed,t)):(new RegExp(a.ipv4Pattern).test(t)||e.addMessage(i,a.messages.message,t),a.ipv4||e.addMessage(i,a.messages.ipv4NotAllowed,t));else e.addMessage(i,a.messages.message,t);else e.addMessage(i,a.messages.hasSubnet,t);else e.addMessage(i,a.messages.noSubnet,t)}}};function i(e,i,a){if("undefined"==typeof File)return[];var n=t(e.input,e.$form).get(0);if(void 0===n)return[];var r=n.files;return r?0===r.length?(a.skipOnEmpty||i.push(a.uploadRequired),[]):a.maxFiles&&a.maxFiles<r.length?(i.push(a.tooMany),[]):r:(i.push(a.message),[])}function a(t,e,i){if(i.extensions&&i.extensions.length>0){for(var a=!1,n=t.name.toLowerCase(),r=0;r<i.extensions.length;r++){var s=i.extensions[r].toLowerCase();if(""===s&&-1===n.indexOf(".")||n.substr(n.length-i.extensions[r].length-1)==="."+s){a=!0;break}}a||e.push(i.wrongExtension.replace(/\{file\}/g,t.name))}i.mimeTypes&&i.mimeTypes.length>0&&(function(t,e){for(var i=0,a=t.length;i<a;i++)if(new RegExp(t[i]).test(e))return!0;return!1}(i.mimeTypes,t.type)||e.push(i.wrongMimeType.replace(/\{file\}/g,t.name))),i.maxSize&&i.maxSize<t.size&&e.push(i.tooBig.replace(/\{file\}/g,t.name)),i.minSize&&i.minSize>t.size&&e.push(i.tooSmall.replace(/\{file\}/g,t.name))}return e}(jQuery),function(t){t.fn.yiiGridView=function(e){return r[e]?r[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?(t.error("Method "+e+" does not exist in jQuery.yiiGridView"),!1):r.init.apply(this,arguments)};var e={filterUrl:void 0,filterSelector:void 0,filterOnFocusOut:!0},i={},a={beforeFilter:"beforeFilter",afterFilter:"afterFilter"},n={},r={init:function(a){return this.each(function(){var n=t(this),o=t.extend({},e,a||{}),l=n.attr("id");void 0===i[l]&&(i[l]={}),i[l]=t.extend(i[l],{settings:o});var u=!1;s(n,"filter","change.yiiGridView keydown.yiiGridView",o.filterSelector,function(t){if("keydown"===t.type){if(13!==t.keyCode)return;u=!0}else if(u)return void(u=!1);return!(!o.filterOnFocusOut&&"keydown"!==t.type)&&(r.applyFilter.apply(n),!1)})})},applyFilter:function(){var e=t(this),n=i[e.attr("id")].settings,r={};t.each(t(n.filterSelector).serializeArray(),function(){this.name in r||(r[this.name]=[]),r[this.name].push(this.value)});var s=Object.keys(r);t.each(yii.getQueryParams(n.filterUrl),function(e,i){-1===s.indexOf(e)&&-1===s.indexOf(e.replace(/\[\d*\]$/,""))&&(t.isArray(i)||(i=[i]),e in r?t.each(i,function(i,a){t.inArray(a,r[e])&&r[e].push(a)}):r[e]=i)});var o=n.filterUrl.indexOf("?"),l=o<0?n.filterUrl:n.filterUrl.substring(0,o),u=n.filterUrl.indexOf("#");o>=0&&u>=0&&(l+=n.filterUrl.substring(u)),e.find("form.gridview-filter-form").remove();var c=t("<form/>",{action:l,method:"get",class:"gridview-filter-form",style:"display:none","data-pjax":""}).appendTo(e);t.each(r,function(e,i){t.each(i,function(i,a){c.append(t("<input/>").attr({type:"hidden",name:e,value:a}))})});var d=t.Event(a.beforeFilter);e.trigger(d),!1!==d.result&&(c.submit(),e.trigger(a.afterFilter))},setSelectionColumn:function(e){var a=t(this),n=t(this).attr("id");if(void 0===i[n]&&(i[n]={}),i[n].selectionColumn=e.name,e.multiple&&e.checkAll){var r="#"+n+" input[name='"+e.checkAll+"']",o=e.class?"input."+e.class:"input[name='"+e.name+"']",l="#"+n+" "+o+":enabled";s(a,"checkAllRows","click.yiiGridView",r,function(){a.find(o+":enabled").prop("checked",this.checked).change()}),s(a,"checkRow","click.yiiGridView",l,function(){var t=a.find(o).length==a.find(o+":checked").length;a.find("input[name='"+e.checkAll+"']").prop("checked",t).change()})}},getSelectedRows:function(){var e=t(this),a=i[e.attr("id")],n=[];return a.selectionColumn&&e.find("input[name='"+a.selectionColumn+"']:checked").each(function(){n.push(t(this).parent().closest("tr").data("key"))}),n},destroy:function(){var e=[".yiiGridView",a.beforeFilter,a.afterFilter].join(" ");this.off(e);var r=t(this).attr("id");return t.each(n[r],function(e,i){t(document).off(i.event,i.selector)}),delete i[r],this},data:function(){var e=t(this).attr("id");return i[e]}};function s(e,i,a,r,s){var o=e.attr("id"),l=n[o];if(void 0!==l&&void 0!==l[i]){var u=l[i];t(document).off(u.event,u.selector)}void 0===l&&(n[o]={}),t(document).on(a,r,s),n[o][i]={event:a,selector:r}}}(window.jQuery),function(t){t.fn.yiiCaptcha=function(e){return i[e]?i[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?(t.error("Method "+e+" does not exist in jQuery.yiiCaptcha"),!1):i.init.apply(this,arguments)};var e={refreshUrl:void 0,hashKey:void 0},i={init:function(a){return this.each(function(){var n=t(this),r=t.extend({},e,a||{});n.data("yiiCaptcha",{settings:r}),n.on("click.yiiCaptcha",function(){return i.refresh.apply(n),!1})})},refresh:function(){var e=this,i=this.data("yiiCaptcha").settings;t.ajax({url:e.data("yiiCaptcha").settings.refreshUrl,dataType:"json",cache:!1,success:function(a){e.attr("src",a.url),t("body").data(i.hashKey,[a.hash1,a.hash2])}})},destroy:function(){return this.off(".yiiCaptcha"),this.removeData("yiiCaptcha"),this},data:function(){return this.data("yiiCaptcha")}}}(window.jQuery),function(t){t.fn.yiiActiveForm=function(e){return h[e]?h[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?(t.error("Method "+e+" does not exist on jQuery.yiiActiveForm"),!1):h.init.apply(this,arguments)};var e,i="beforeValidate",a="afterValidate",n="beforeValidateAttribute",r="afterValidateAttribute",s="beforeSubmit",o="ajaxBeforeSend",l="ajaxComplete",u="afterInit",c={encodeErrorSummary:!0,errorSummary:".error-summary",validateOnSubmit:!0,errorCssClass:"has-error",successCssClass:"has-success",validatingCssClass:"validating",ajaxParam:"ajax",ajaxDataType:"json",validationUrl:void 0,scrollToError:!0,scrollToErrorOffset:0,validationStateOn:"container"},d={id:void 0,name:void 0,container:void 0,input:void 0,error:".help-block",encodeError:!0,validateOnChange:!0,validateOnBlur:!0,validateOnType:!1,validationDelay:500,enableAjaxValidation:!1,validate:void 0,status:0,cancelled:!1,value:void 0,updateAriaInvalid:!0},f=function(t){e&&(e.resolve(),e=void 0,t.removeData("yiiSubmitFinalizePromise"))},h={init:function(e,i){return this.each(function(){var a=t(this);if(!a.data("yiiActiveForm")){var n=t.extend({},c,i||{});void 0===n.validationUrl&&(n.validationUrl=a.attr("action")),t.each(e,function(i){e[i]=t.extend({value:E(a,this)},d,this),m(a,e[i])}),a.data("yiiActiveForm",{settings:n,attributes:e,submitting:!1,validated:!1,options:A(a)}),a.on("reset.yiiActiveForm",h.resetForm),n.validateOnSubmit&&(a.on("mouseup.yiiActiveForm keyup.yiiActiveForm",":submit",function(){a.data("yiiActiveForm").submitObject=t(this)}),a.on("submit.yiiActiveForm",h.submitForm));var r=t.Event(u);a.trigger(r)}})},add:function(e){var i=t(this);e=t.extend({value:E(i,e)},d,e),i.data("yiiActiveForm").attributes.push(e),m(i,e)},remove:function(e){var i=t(this),a=i.data("yiiActiveForm").attributes,n=-1,r=void 0;return t.each(a,function(t){if(a[t].id==e)return n=t,r=a[t],!1}),n>=0&&(a.splice(n,1),p(i,r)),r},validateAttribute:function(e){var i=h.find.call(this,e);null!=i&&v(t(this),i,!0)},find:function(e){var i=t(this).data("yiiActiveForm").attributes,a=void 0;return t.each(i,function(t){if(i[t].id==e)return a=i[t],!1}),a},destroy:function(){return this.each(function(){t(this).off(".yiiActiveForm"),t(this).removeData("yiiActiveForm")})},data:function(){return this.data("yiiActiveForm")},validate:function(e){e&&(t(this).data("yiiActiveForm").submitting=!0);var a=t(this),r=a.data("yiiActiveForm"),s=!1,u={},c=x(),d=r.submitting;if(d){var h=t.Event(i);if(a.trigger(h,[u,c]),!1===h.result)return r.submitting=!1,void f(a)}t.each(r.attributes,function(){this.$form=a;var e=S(a,this);if(e.toArray().reduce(function(e,i){return e&&t(i).is(":disabled")},!0))return!0;if(e.length&&"select"===e[0].tagName.toLowerCase()){var i=e[0].options,o=!i||!i.length,l=e.attr("required"),d=e.attr("multiple"),f=e.attr("size")||1;if(l&&!d&&1===parseInt(f,10)){if(o)return!0;if(i[0]&&""!==i[0].value&&""!==i[0].text)return!0}}if(this.cancelled=!1,r.submitting||2===this.status||3===this.status){var h=u[this.id];void 0===h&&(h=[],u[this.id]=h);var m=t.Event(n);a.trigger(m,[this,h,c]),!1!==m.result?(this.validate&&this.validate(this,E(a,this),h,c,a),this.enableAjaxValidation&&(s=!0)):this.cancelled=!0}}),t.when.apply(this,c).always(function(){for(var e in u)0===u[e].length&&delete u[e];if(s&&(t.isEmptyObject(u)||r.submitting)){var i=r.submitObject,n="&"+r.settings.ajaxParam+"="+a.attr("id");i&&i.length&&i.attr("name")&&(n+="&"+i.attr("name")+"="+i.attr("value")),t.ajax({url:r.settings.validationUrl,type:a.attr("method"),data:a.serialize()+n,dataType:r.settings.ajaxDataType,complete:function(t,e){a.trigger(l,[t,e])},beforeSend:function(t,e){a.trigger(o,[t,e])},success:function(e){null!==e&&"object"==typeof e?(t.each(r.attributes,function(){this.enableAjaxValidation&&!this.cancelled||delete e[this.id]}),C(a,t.extend(u,e),d)):C(a,u,d)},error:function(){r.submitting=!1,f(a)}})}else r.submitting?window.setTimeout(function(){C(a,u,d)},200):C(a,u,d)})},submitForm:function(){var i=t(this),a=i.data("yiiActiveForm");if(a.validated){a.submitting=!1;var n=t.Event(s);return i.trigger(n),!1===n.result?(a.validated=!1,f(i),!1):(j(i),!0)}return function(i){e=t.Deferred(),i.data("yiiSubmitFinalizePromise",e.promise())}(i),void 0!==a.settings.timer&&clearTimeout(a.settings.timer),a.submitting=!0,h.validate.call(i),!1},resetForm:function(){var e=t(this),i=e.data("yiiActiveForm");window.setTimeout(function(){t.each(i.attributes,function(){this.value=E(e,this),this.status=0;var t=e.find(this.container),a=S(e,this);("input"===i.settings.validationStateOn?a:t).removeClass(i.settings.validatingCssClass+" "+i.settings.errorCssClass+" "+i.settings.successCssClass),t.find(this.error).html("")}),e.find(i.settings.errorSummary).hide().find("ul").html("")},1)},updateMessages:function(e,i){var a=t(this),n=a.data("yiiActiveForm");t.each(n.attributes,function(){k(a,this,e)}),i&&O(a,e)},updateAttribute:function(e,i){var a=h.find.call(this,e);if(null!=a){var n={};n[e]=i,k(t(this),a,n)}}},m=function(e,i){var a=S(e,i);i.validateOnChange&&a.on("change.yiiActiveForm",function(){v(e,i,!1)}),i.validateOnBlur&&a.on("blur.yiiActiveForm",function(){0!=i.status&&1!=i.status||v(e,i,!0)}),i.validateOnType&&a.on("keyup.yiiActiveForm",function(a){-1===t.inArray(a.which,[16,17,18,37,38,39,40])&&i.value!==E(e,i)&&v(e,i,!1,i.validationDelay)})},p=function(t,e){S(t,e).off(".yiiActiveForm")},v=function(e,i,a,n){var r=e.data("yiiActiveForm");a&&(i.status=2),t.each(r.attributes,function(){g(this.value,E(e,this))||(this.status=2,a=!0)}),a&&(void 0!==r.settings.timer&&clearTimeout(r.settings.timer),r.settings.timer=window.setTimeout(function(){r.submitting||e.is(":hidden")||(t.each(r.attributes,function(){if(2===this.status){this.status=3;var t=e.find(this.container),i=S(e,this);("input"===r.settings.validationStateOn?i:t).addClass(r.settings.validatingCssClass)}}),h.validate.call(e))},n||200))},g=function(t,e){return t instanceof Object?y(t,e):Array.isArray(t)?b(t,e):t===e},y=function(t,e){if(!(t instanceof Object&&e instanceof Object))return!1;var i=Object.keys(t),a=Object.keys(e);if(i.length!==a.length)return!1;for(var n=0;n<i.length;n+=1){if(!e.hasOwnProperty(i[n]))return!1;if(t[i[n]]!==e[i[n]])return!1}return!0},b=function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;i+=1)if(t[i]!==e[i])return!1;return!0},x=function(){var e=[];return e.add=function(e){this.push(new t.Deferred(e))},e},w=["action","target","method","enctype"],A=function(t){for(var e={},i=0;i<w.length;i++)e[w[i]]=t.attr(w[i]);return e},C=function(e,i,n){var r=e.data("yiiActiveForm");if(void 0===r)return!1;var s=[];if(t.each(r.attributes,function(){var t=n&&k(e,this,i)||!n&&F(e,this,i);S(e,this).is(":disabled")||this.cancelled||!t||s.push(this)}),e.trigger(a,[i,s]),n)if(O(e,i),s.length){if(r.settings.scrollToError){var o=t(document).height(),l=e.find(t.map(s,function(t){return t.input}).join(",")).first().closest(":visible").offset().top-r.settings.scrollToErrorOffset;l=l<0?0:l>o?o:l;var u=t(window).scrollTop();(l<u||l>u+t(window).height())&&t(window).scrollTop(l)}r.submitting=!1}else r.validated=!0,r.submitObject&&function(t,e){for(var i=0;i<w.length;i++){var a=e.attr("form"+w[i]);a&&t.attr(w[i],a)}}(e,r.submitObject),e.submit(),r.submitObject&&function(t){for(var e=t.data("yiiActiveForm"),i=0;i<w.length;i++)t.attr(w[i],e.options[w[i]]||null)}(e);else t.each(r.attributes,function(){this.cancelled||2!==this.status&&3!==this.status||k(e,this,i)});f(e)},j=function(e){var i=e.data("yiiActiveForm").submitObject||e.find(":submit:first");if(i.length&&"submit"==i.attr("type")&&i.attr("name")){var a=t('input[type="hidden"][name="'+i.attr("name")+'"]',e);a.length?a.attr("value",i.attr("value")):t("<input>").attr({type:"hidden",name:i.attr("name"),value:i.attr("value")}).appendTo(e)}},k=function(e,i,a){var n=e.data("yiiActiveForm"),s=S(e,i),o=F(e,i,a);if(t.isArray(a[i.id])||(a[i.id]=[]),i.status=1,s.length){var l=e.find(i.container),u=l.find(i.error);T(e,i,o);var c="input"===n.settings.validationStateOn?s:l;o?(i.encodeError?u.text(a[i.id][0]):u.html(a[i.id][0]),c.removeClass(n.settings.validatingCssClass+" "+n.settings.successCssClass).addClass(n.settings.errorCssClass)):(u.empty(),c.removeClass(n.settings.validatingCssClass+" "+n.settings.errorCssClass+" ").addClass(n.settings.successCssClass)),i.value=E(e,i)}return e.trigger(r,[i,a[i.id]]),o},F=function(e,i,a){var n=S(e,i),r=!1;return t.isArray(a[i.id])||(a[i.id]=[]),n.length&&(r=a[i.id].length>0),r},O=function(e,i){var a=e.data("yiiActiveForm"),n=e.find(a.settings.errorSummary),r=n.find("ul").empty();n.length&&i&&(t.each(a.attributes,function(){if(t.isArray(i[this.id])&&i[this.id].length){var e=t("<li/>");a.settings.encodeErrorSummary?e.text(i[this.id][0]):e.html(i[this.id][0]),r.append(e)}}),n.toggle(r.find("li").length>0))},E=function(e,i){var a=S(e,i),n=a.attr("type");if("checkbox"===n||"radio"===n){var r=a.filter(":checked");if(r.length>1){var s=[];return r.each(function(e){s.push(t(r.get(e)).val())}),s}return r.length||(r=e.find('input[type=hidden][name="'+a.attr("name")+'"]')),r.val()}return a.val()},S=function(t,e){var i=t.find(e.input);return i.length&&"div"===i[0].tagName.toLowerCase()?i.find("input"):i},T=function(t,e,i){e.updateAriaInvalid&&t.find(e.input).attr("aria-invalid",i?"true":"false")}}(window.jQuery);